<!DOCTYPE html><html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><!-- link(rel="stylesheet" href="https://pyscript.net/releases/2024.1.1/core.css")--><!-- script(type="module" src="https://pyscript.net/releases/2024.1.1/core.js")--><link rel="stylesheet" href="https://pyscript.net/releases/2024.11.1/core.css"/><script type="module" src="https://pyscript.net/releases/2024.11.1/core.js"></script><link rel="stylesheet" href="style.css"/><title>Rotation Finder</title></head><body><input class="menu" id="menu_input" type="checkbox" name="menu"/><label class="menu" for="menu_input">&#9776;</label><script src="loading_screen.js"></script><ul class="submenu"><li><label for="settings_population">Population</label><input type="number" id="settings_population" name="settings_population" min="8" max="512" value="64"/></li><li><label for="settings_iterations">Iterations</label><input type="number" id="settings_iterations" name="settings_iterations" min="64" max="4096" value="1024"/></li><li><label for="settings_rows">Result rows</label><input type="number" id="settings_rows" name="settings_rows" min="1" max="128" value="8"/></li><li><label for="settings_swap_cost">Swap cost</label><input type="number" id="settings_swap_cost" name="settings_swap_cost" min="0" max="10" value="0.01" step="0.01"/></li><li><button id="share_button">Save</button></li></ul><input class="help" id="help_input" type="checkbox" name="help"/><label class="help" for="help_input">?</label><ul class="subhelp"><h1>How does it work?</h1><p>The tool generates an order of players for a 4-2 rotation using a genetic algorithm. This works by keeping a 'population' of candidate orderings, finding the best orderings based on computed scores, then replacing the worst candidates over time from some random combinations ("children") of other candidates.  Rotations are presented as positions 1, 2, 3, and so on; the scores that the tool is optimizing don't depend on which side(s) people are off the court on, just on local groupings of 3 players, so you can freely rotate the orders however much you'd like. For presentation purposes, the orderings are all rotated to start with the first player in the list, so it may simplify things to just make that player be who you'd like to serve and put them in position 1.</p><p>There are options related to the optimization process available in the top right menu that are explained below. The short version of the idea is, for larger teams you should bump up the population and iterations values, but you can get a sense of if that is necessary by hitting calculate a few times and seeing if the best scores are staying stable.</p><ul><li><b>Population</b>: This is the size of the "working set" of active player orderings. Having a larger population size increases the ability of the algorithm to explore its options.</li><li><b>Iterations</b>: This is the number of optimization steps (each step replaces the worst element of the population with a new one, randomly generated as a minor tweak to an existing element or a cross-pollination of two random elements from the live population). More iterations means that the algorithm will more deeply explore the optimization space.</li><li><b>Result rows</b>: This simply controls how many of the best results from the population are shown. The population can include multiple rotations that are equivalent (i.e. rotated versions of each other), so if you set a population of 5, you could end up with only up to 3 displayed results, for example.</li><li><b>Swap cost</b>: This is the penalty that is applied during the optimization process for players having to swap in the front row. You'll see that, as you increase the value, you will end up with more players playing all three positions as they move into the corresponding place in the front row. This value is fairly small by default, just to avoid swapping (i.e. if you have S/O, M, S/O on the front row), but if you have players that are very willing to flex or have a tough time when receiving serves, you could try rotations with this value being larger.</li><li><b>Save</b>: This button sets the URL of the page to the current state of the tool (including players' position affinities and optimizer options), so it could be bookmarked, sent to someone else, or viewed as a separate step in your browser history.</li></ul><h1>What do the scores mean?</h1><p>At the moment, there are two scores that are used to guide the optimization process. Candidate rotations try to maximize the scores in order, so (3, 1) will be better than (2, 10000).</p><p>The first score is based on how many groups of 3 players around the court would be able to satisfy having a setter, middle, and outside (based on those players setting 0 for each role's affinity or a nonzero value); this helps the algorithm not waste time on rotations where nobody is able to middle, for example. This means that <b>there is a difference in having 0 affinity for a position and the smallest possible affinity for a position</b> for a given player; I would express this as the difference between a "want" to play a given position and a "need" to not play a given position.</p><p>The second score is a softer score determined by the affinities themselves: for each group of 3 players, we try all possible assignments of {setter, middle, outside} to {player A, player B, player C} and see which of those assignments makes that group happiest, based on their affinities for each position. There is also a penalty applied to these configurations based on how many swaps need to happen in the front row (for example, having the front row look like "outside - middle - setter" is nicer than "setter - middle - outside").</p></ul><div style="display: flex; justify-content: center;" width="100%"><div class="narrow"><table id="player_table"></table><div style="display: flex; justify-content: center;"><button id="add_player_button">Add player</button><button id="calculate_button">Calculate</button></div><table id="output_table" style="margin-top: 2em"></table></div></div><script type="py" src="main.py" config="pyscript.toml"></script><div class="loading_screen"><p style="margin-top: 4em">Loading</p><p id="loading_progress"></p><p class="spinning">&#127952;</p></div></body></html>